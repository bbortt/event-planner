sonarqube {
    properties {
        sonar.test.inclusions = "src/test/**/*.java"
        sonar.coverage.jacoco.xmlReportPaths = "build/reports/jacoco/test/jacocoTestReport.xml"
        sonar.java.codeCoveragePlugin = "jacoco"
        sonar.junit.reportPaths = ["build/test-results/test", "build/test-results/integrationTest"]
    }
}

jacocoTestReport {
    executionData tasks.withType(Test)
    classDirectories.from = files(sourceSets.main.output.classesDirs)
    sourceDirectories.from = files(sourceSets.main.java.srcDirs)

    reports {
        xml.enabled = true
    }
}
jacocoTestReport.dependsOn integrationTest
check.dependsOn jacocoTestReport
