sonarqube {
    properties {
        property "sonar.test.inclusions", "src/test/**/*.java"
        property "sonar.coverage.jacoco.xmlReportPaths", "build/reports/jacoco/test/jacocoTestReport.xml"
        property "sonar.java.codeCoveragePlugin", "jacoco"
        property "sonar.junit.reportPaths", "build/test-results/test/TEST-.*.xml, build/test-results/integrationTest/TEST-.*.xml"
    }
}

jacocoTestReport {
    executionData tasks.withType(Test)
    classDirectories.from = files(sourceSets.main.output.classesDirs)
    sourceDirectories.from = files(sourceSets.main.java.srcDirs)

    reports {
        xml.enabled = true
    }
}
jacocoTestReport.dependsOn integrationTest
check.dependsOn jacocoTestReport
