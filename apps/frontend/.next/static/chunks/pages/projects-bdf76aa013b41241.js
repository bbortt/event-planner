(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{7670:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return r(3776)}])},6080:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(5893),a=r(9008),i=r.n(a),s=r(682),o=r(5738),c=r(9368),l=r(1330),d=r(6542),u=r(1472),h=r.n(u);let p=e=>{let{user:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:t.name||t.nickname||"Profil"}),t.picture&&(0,n.jsx)(l.Z,{rounded:!0,src:t.picture,alt:"Profile picture",className:h().userIcon})]})},m=e=>{let{user:t}=e;return(0,n.jsx)(d.Z,{title:(0,n.jsx)(p,{user:t}),id:"collasible-nav-dropdown",children:(0,n.jsx)(d.Z.Item,{href:"/api/auth/logout",children:"Uslogg\xe4"})})},f=e=>{let{user:t}=e;return(0,n.jsx)(o.Z,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",children:(0,n.jsxs)(s.Z,{children:[(0,n.jsx)(o.Z.Brand,{href:"/",children:"Event-Planner"}),(0,n.jsx)(o.Z.Toggle,{"aria-controls":"responsive-navbar-nav"}),(0,n.jsxs)(o.Z.Collapse,{id:"responsive-navbar-nav",children:[(0,n.jsx)(c.Z,{className:"me-auto"}),(0,n.jsx)(c.Z,{children:t?(0,n.jsx)(m,{user:t}):(0,n.jsx)(c.Z.Link,{href:"/api/auth/login",children:"Ilogg\xe4"})})]})]})})};var j=r(9934),g=r.n(j);let x=e=>{let{user:t,children:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{user:t}),(0,n.jsx)("main",{className:g().main,children:(0,n.jsx)(s.Z,{className:"md-container",children:r})})]})},w=e=>{let{user:t,children:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"Event-Planner"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"})]}),(0,n.jsx)(x,{user:t,children:r})]})};var v=w},3776:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return F},default:function(){return B}});var n=r(5893),a=r(7294),i=r(682),s=r(4051),o=r(1555),c=r(5005),l=r(8375),d=r(6080),u=r(6212);let h="http://localhost:8080/api/rest".replace(/\/+$/,"");class p{set config(e){this.configuration=e}get basePath(){return null!=this.configuration.basePath?this.configuration.basePath:h}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t).map(n=>(function t(r,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=a+(a.length?"[".concat(r,"]"):r);if(n instanceof Array){let s=n.map(e=>encodeURIComponent(String(e))).join("&".concat(encodeURIComponent(i),"="));return"".concat(encodeURIComponent(i),"=").concat(s)}if(n instanceof Set){let o=Array.from(n);return t(r,o,a)}return n instanceof Date?"".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(n.toISOString())):n instanceof Object?e(n,i):"".concat(encodeURIComponent(i),"=").concat(encodeURIComponent(String(n)))})(n,t[n],r)).filter(e=>e.length>0).join("&")}}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){let e=this.configuration.apiKey;if(e)return"function"==typeof e?e:()=>e}get accessToken(){let e=this.configuration.accessToken;if(e)return"function"==typeof e?e:async()=>e}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}constructor(e={}){this.configuration=e}}let m=new p;class f{withMiddleware(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=this.clone();return n.middleware=n.middleware.concat(...t),n}withPreMiddleware(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=t.map(e=>({pre:e}));return this.withMiddleware(...n)}withPostMiddleware(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=t.map(e=>({post:e}));return this.withMiddleware(...n)}async request(e,t){let{url:r,init:n}=await this.createFetchParams(e,t),a=await this.fetchApi(r,n);if(a.status>=200&&a.status<300)return a;throw new j(a,"Response returned an error code")}async createFetchParams(e,t){var r,n;let a=this.configuration.basePath+e.path;void 0!==e.query&&0!==Object.keys(e.query).length&&(a+="?"+this.configuration.queryParamsStringify(e.query));let i=Object.assign({},this.configuration.headers,e.headers);Object.keys(i).forEach(e=>void 0===i[e]?delete i[e]:{});let s={method:e.method,headers:i,body:e.body,credentials:this.configuration.credentials},o={...s,...await ("function"==typeof t?t:async()=>t)({init:s,context:e})},c={...o,body:(r=o.body,"undefined"!=typeof FormData&&r instanceof FormData||o.body instanceof URLSearchParams||(n=o.body,"undefined"!=typeof Blob&&n instanceof Blob))?o.body:JSON.stringify(o.body)};return{url:a,init:c}}clone(){let e=this.constructor,t=new e(this.configuration);return t.middleware=this.middleware.slice(),t}constructor(e=m){this.configuration=e,this.fetchApi=async(e,t)=>{let r,n={url:e,init:t};for(let a of this.middleware)a.pre&&(n=await a.pre({fetch:this.fetchApi,...n})||n);try{r=await (this.configuration.fetchApi||fetch)(n.url,n.init)}catch(s){for(let i of this.middleware)i.onError&&(r=await i.onError({fetch:this.fetchApi,url:n.url,init:n.init,error:s,response:r?r.clone():void 0})||r);if(void 0===r){if(s instanceof Error)throw new g(s,"The request failed and the interceptors did not return an alternative response");throw s}}for(let o of this.middleware)o.post&&(r=await o.post({fetch:this.fetchApi,url:n.url,init:n.init,response:r.clone()})||r);return r},this.middleware=e.middleware}}class j extends Error{constructor(e,t){super(t),this.response=e,this.name="ResponseError"}}class g extends Error{constructor(e,t){super(t),this.cause=e,this.name="FetchError"}}class x extends Error{constructor(e,t){super(t),this.field=e,this.name="RequiredError"}}function w(e,t){let r=e[t];return null!=r}class v{async value(){return this.transformer(await this.raw.json())}constructor(e,t=e=>e){this.raw=e,this.transformer=t}}function y(e){return null==e?e:{id:w(e,"id")?e.id:void 0,token:e.token,name:e.name,description:w(e,"description")?e.description:void 0,startDate:new Date(e.startDate),endDate:new Date(e.endDate)}}class b extends f{async createProjectRaw(e,t){var r;let n={};n["Content-Type"]="application/json",this.configuration&&this.configuration.accessToken&&(n.Authorization=await this.configuration.accessToken("user_auth",[]));let a=await this.request({path:"/v1/projects",method:"POST",headers:n,query:{},body:void 0===(r=e.project)?void 0:null===r?null:{id:r.id,token:r.token,name:r.name,description:r.description,startDate:r.startDate.toISOString().substr(0,10),endDate:r.endDate.toISOString().substr(0,10)}},t);return new v(a,e=>y(e))}async createProject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=await this.createProjectRaw(e,t);return await r.value()}async readProjectByIdRaw(e,t){if(null===e.projectId||void 0===e.projectId)throw new x("projectId","Required parameter requestParameters.projectId was null or undefined when calling readProjectById.");let r={};this.configuration&&this.configuration.accessToken&&(r.Authorization=await this.configuration.accessToken("user_auth",[]));let n=await this.request({path:"/v1/projects/{projectId}".replace("{projectId}",encodeURIComponent(String(e.projectId))),method:"GET",headers:r,query:{}},t);return new v(n,e=>y(e))}async readProjectById(e,t){let r=await this.readProjectByIdRaw(e,t);return await r.value()}async readProjectsRaw(e,t){let r={};void 0!==e.pageSize&&(r.pageSize=e.pageSize),void 0!==e.pageNumber&&(r.pageNumber=e.pageNumber),void 0!==e.sort&&(r.sort=e.sort);let n={};this.configuration&&this.configuration.accessToken&&(n.Authorization=await this.configuration.accessToken("user_auth",[]));let a=await this.request({path:"/v1/projects",method:"GET",headers:n,query:r},t);return new v(a,e=>null==e?e:{contents:w(e,"contents")?e.contents.map(y):void 0,totalElements:w(e,"totalElements")?e.totalElements:void 0,totalPages:w(e,"totalPages")?e.totalPages:void 0,number:w(e,"number")?e.number:void 0})}async readProjects(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=await this.readProjectsRaw(e,t);return await r.value()}}var D=r(4713),P=r(3454);let Z=P.env.NEXT_PUBLIC_AUTH0_AUDIENCE;(0,D.T1)({secret:P.env.SESSION_COOKIE_SECRET,issuerBaseURL:"https://event-planner-dev.eu.auth0.com",baseURL:"http://localhost:3000",clientID:"K2NedU1P40Kc7Y4BJ8GFjAzjFp0vzz48",clientSecret:P.env.AUTH0_CLIENT_SECRET,routes:{callback:"/api/auth/callback",postLogoutRedirect:"/"},authorizationParams:{audience:Z,response_type:"code",scope:"openid profile restapi:access"},session:{absoluteDuration:Number(P.env.SESSION_COOKIE_LIFETIME)}});let I=()=>new p({basePath:"".concat(window.location.origin,"/api/rest")}),k=e=>e(I());var E=r(2914),S=r(2175);let _=e=>{let{initialProject:t,setIsValid:r,setProject:a}=e,i=e=>{let t={};e.name&&e.name.length>50&&(t.name="Es Projekt muess \xe4 Nam\xe4 ha u d\xe4 darf maximal 50 Zeich\xe4 l\xe4ng si."),e.description&&e.description.length>300&&(t.description="Es Beschribig darf maximal 300 Zeich\xe4 l\xe4ng si."),e.startDate&&e.startDate<new Date&&(t.startDate="Es Projekt muess es Startdatum ir Zuekunft ha."),e.endDate&&e.endDate<new Date&&(t.endDate="Es Projekt muess es \xc4ndatum ir Zuekunft ha."),e.endDate&&e.startDate&&e.endDate<e.startDate&&(t.endDate="Ds \xc4ndatum cha ned vorem Startdatum ligg\xe4.");let n=!!e.name&&!!e.startDate&&!!e.endDate&&0===Object.entries(t).length;return n&&a({...e,startDate:new Date(e.startDate),endDate:new Date(e.endDate)}),r(n),t};return(0,n.jsx)(S.J9,{initialValues:t||{name:"",description:"",startDate:new Date,endDate:new Date},validate:i,onSubmit(){},children(e){let{values:t,touched:r,isValid:a,errors:i}=e;return(0,n.jsxs)(E.Z,{noValidate:!0,children:[(0,n.jsx)(S.gN,{name:"name",children(e){let{field:t,form:{errors:r,touched:a}}=e;return(0,n.jsxs)(E.Z.Group,{className:"mb-3",controlId:"name",children:[(0,n.jsx)(E.Z.Label,{children:"Nam\xe4"}),(0,n.jsx)(E.Z.Control,{required:!0,type:"text",placeholder:"Nam\xe4 f\xfcrs Projekt",...t,isValid:a.name&&!r.name,isInvalid:a.name&&!!r.name,autoFocus:!0}),(0,n.jsx)(E.Z.Control.Feedback,{type:"invalid",children:r.name})]})}}),(0,n.jsx)(S.gN,{name:"description",children(e){let{field:t,form:{errors:r,touched:a}}=e;return(0,n.jsxs)(E.Z.Group,{className:"mb-3",controlId:"description",children:[(0,n.jsx)(E.Z.Label,{children:"Beschribig"}),(0,n.jsx)(E.Z.Control,{required:!0,type:"text",as:"textarea",placeholder:"\xc4 optionali Beschribig",...t,isValid:a.description&&!r.description,isInvalid:a.description&&!!r.description}),(0,n.jsx)(E.Z.Control.Feedback,{type:"invalid",children:r.description})]})}}),(0,n.jsx)(S.gN,{name:"startDate",children(e){let{field:t,form:{errors:r,touched:a}}=e;return(0,n.jsxs)(E.Z.Group,{className:"mb-3",controlId:"startDate",children:[(0,n.jsx)(E.Z.Label,{children:"Start Datum"}),(0,n.jsx)(E.Z.Control,{required:!0,type:"date",...t,isValid:a.startDate&&!r.startDate,isInvalid:a.startDate&&!!r.startDate}),(0,n.jsx)(E.Z.Control.Feedback,{type:"invalid",children:r.startDate})]})}}),(0,n.jsx)(S.gN,{name:"endDate",children(e){let{field:t,form:{errors:r,touched:a}}=e;return(0,n.jsxs)(E.Z.Group,{className:"mb-3",controlId:"endDate",children:[(0,n.jsx)(E.Z.Label,{children:"\xc4nd Datum"}),(0,n.jsx)(E.Z.Control,{required:!0,type:"date",...t,isValid:a.endDate&&!r.endDate,isInvalid:a.endDate&&!!r.endDate}),(0,n.jsx)(E.Z.Control.Feedback,{type:"invalid",children:r.endDate})]})}})]})}})},N=e=>{let{handleVisibilityChange:t,setErrorMessage:r,show:i}=e,[s,o]=(0,a.useState)(!1),[l,d]=(0,a.useState)({}),h=async()=>{s&&k(e=>new b(e)).createProject({project:l}).then(e=>t(e),e=>{r("Ha das Projekt leider ned ch\xf6nne kreir\xe4 - irgendwo ischmer e F\xe4hler passiert. Probiers doch no eis!"),t()})};return(0,n.jsxs)(u.Z,{show:i,onHide:()=>t(),children:[(0,n.jsx)(u.Z.Header,{closeButton:!0,children:(0,n.jsx)(u.Z.Title,{children:"Neus Projekt erstell\xe4"})}),(0,n.jsx)(u.Z.Body,{children:(0,n.jsx)(_,{setIsValid:o,setProject:d})}),(0,n.jsxs)(u.Z.Footer,{children:[(0,n.jsx)(c.Z,{variant:"warning",onClick:()=>t(),children:"Abbr\xe4che"}),(0,n.jsx)(c.Z,{variant:"success",disabled:!s,onClick:()=>h(),children:"Spicher\xe4"})]})]})};var C=r(2205);let T=e=>{let{children:t,number:r,totalPages:a}=e;return(0,n.jsxs)(n.Fragment,{children:[t,(0,n.jsx)(C.Z,{children:function(e,t){let r=[];for(let a=1;a<=t;a++)return r.push((0,n.jsx)(C.Z.Item,{active:a===e,children:a},a)),r}(r,a)})]})},R=e=>{let{projects:t}=e;return(0,n.jsx)(n.Fragment,{children:JSON.stringify(t)})};var q=r(3163),A=r.n(q);let O=e=>{let{user:t,contents:r,number:u,totalPages:h,error:p}=e,[m,f]=(0,a.useState)(!1),[j,g]=(0,a.useState)(p),x=e=>{f(!m),e&&console.log("route to project: ",e)};return(0,n.jsxs)(d.Z,{user:t,children:[(0,n.jsx)(i.Z,{children:(0,n.jsxs)(s.Z,{className:"align-items-center",children:[(0,n.jsx)(o.Z,{md:10,children:(0,n.jsx)("h1",{className:A().pageTitle,children:"Projekt"})}),(0,n.jsx)(o.Z,{md:2,children:(0,n.jsx)(c.Z,{variant:"primary",className:"w-100",onClick:()=>x(),children:"Neus Projekt"})})]})}),(0,n.jsx)(l.Z,{variant:"danger",show:!!j,onClose:()=>g(void 0),dismissible:!0,children:j},"failed-to-fetch-data"),(null==r?void 0:r.length)===0?(0,n.jsx)(l.Z,{variant:"warning",children:"Du bisch no ken\xe4 Projekt bitr\xe4tte..."},"no-projects-present"):(0,n.jsx)(T,{number:u||1,totalPages:h||1,children:(0,n.jsx)(R,{projects:r||[]})}),(0,n.jsx)(N,{show:m,handleVisibilityChange:x,setErrorMessage:g})]})};var F=!0,B=O},9934:function(e){e.exports={main:"layout_main__Rmzas"}},1472:function(e){e.exports={userIcon:"user-information_userIcon__beVxI"}},3163:function(e){e.exports={pageTitle:"projects_pageTitle__L4v67",controlButtonCol:"projects_controlButtonCol__u8bLo"}}},function(e){e.O(0,[770,975,774,888,179],function(){return e(e.s=7670)}),_N_E=e.O()}]);